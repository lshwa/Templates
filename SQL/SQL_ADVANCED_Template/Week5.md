# SQL_ADVANCED 5주차 정규 과제

## **Week 5 : PIVOT / UNPIVOT**

📌**SQL_ADVANCED 정규과제**는 매주 정해진 주제에 따라 **MySQL 공식 문서 또는 한글 블로그 자료를 참고해 개념을 정리한 후, 프로그래머스 SQL 문제 3문제**와 **추가 확인문제**를 직접 풀어보며 학습하는 과제입니다.

이번 주는 아래의 **SQL_ADVANCED_5th_TIL**에 나열된 주제를 중심으로 개념을 학습하고, 주차별 **학습 목표**에 맞게 정리해주세요. 정리한 내용은 GitHub에 업로드한 후, **스프레드시트의 ‘SQL’ 시트에 링크를 제출**해주세요.

**(수행 인증샷은 필수입니다.)**

> 프로그래머스 문제를 풀고 ‘정답입니다’ 문구를 캡쳐해서 올려주시면 됩니다.

------

## **SQL_ADVANCED_5th_TIL**

| **주제** | **문서명**                                 | **설명**                                                     | **링크**                                                     |
| -------- | ------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| PIVOT    | *MySQL 공식 문서에서는 직접 지원하지 않음* | CASE WHEN이나 GROUP_CONCAT을 사용한 수동 피벗 처리 학습 필요 | [(예시 블로그) CASE로 피벗 구현하기](https://jojoldu.tistory.com/514) |
| UNPIVOT  | *MySQL 공식 문서에서는 직접 지원하지 않음* | UNION ALL 또는 JSON_TABLE, CROSS JOIN 등을 사용해 수동 UNPIVOT 구현 | [(참고) UNPIVOT 예제 블로그](https://velog.io/@tjdud0123/MySQL-UNPIVOT) |

- PIVOT/UNPIVOT은 MySQL에서는 직접 문법을 제공하지 않기 때문에, CASE WHEN, GROUP BY, UNION, JOIN 등을 조합하여 수작업으로 구현합니다. 다양한 예제를 통해 전개 방식을 익히는 것이 중요합니다.



## **🏁 강의 수강 (Study Schedule)**

| **주차** | **공부 범위**           | **완료 여부** |
| -------- | ----------------------- | ------------- |
| 0주차    | 서브쿼리 & CTE          | ✅             |
| 1주차    | 집합 연산자 & 그룹 함수 | ✅             |
| 2주차    | 윈도우 함수             | ✅             |
| 3주차    | Top N 쿼리              | ✅             |
| 4주차    | 계층형 질의 & 셀프 조인 | ✅             |
| 5주차    | PIVOT / UNPIVOT         | ✅             |
| 6주차    | 정규 표현식             | 🍽️             |



## 문제



---

## **1. PIVOT**

```
✅ 학습 목표 :
* MySQL에서 직접적인 `PIVOT` 문법은 없으므로, `CASE WHEN`, `GROUP BY`, `MAX()` 등으로 대체 구현할 수 있다.
* 데이터를 행 → 열 방향으로 전개하는 기본 로직을 이해한다.
```

<!-- 새롭게 배운 내용을 자유롭게 정리해주세요. -->



## **2. UNPIVOT**

```
✅ 학습 목표 :
* UNPIVOT 역시 직접 문법이 없으므로, `UNION ALL`과 `JOIN`, JSON 등의 방법으로 열 → 행 형태로 변환하는 과정을 익힌다.
* `UNION ALL`로 수동 구현 시의 컬럼 이름 통일과 데이터 병합 과정을 익힌다.
```

<!-- 새롭게 배운 내용을 자유롭게 정리해주세요. -->







## **확인문제**

### **문제 1**

> **🧚지민이는 매월 각 매장의 월별 매출 데이터가 담긴 테이블을 가공하려 합니다. 아래와 같은 테이블이 있다고 가정합시다.**

| **branch** | **Jan_sales** | **Feb_sales** | **Mar_sales** |
| ---------- | ------------- | ------------- | ------------- |
| A          | 100           | 120           | 130           |
| B          | 90            | 110           | 140           |

> **Q. 이 테이블을 아래와 같은 형태로 바꾸고 싶습니다. SQL에서 UNION ALL을 활용하여 UNPIVOT 구조를 수동으로 구현해보세요.**

| **branch** | **month** | **sales** |
| ---------- | --------- | --------- |
| A          | Jan       | 100       |
| A          | Feb       | 120       |
| A          | Mar       | 130       |
| B          | Jan       | 90        |
| B          | Feb       | 110       |
| B          | Mar       | 140       |

```
여기에 SQL 쿼리를 작성해주세요!
```





### **🎉 수고하셨습니다.**



